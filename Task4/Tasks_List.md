# Список задач по системам — MVP передачи ставок в кол-центр

## АБС (команда АБС)
1. **Модуль управления ставками**
   - Создать централизованный модуль ставок в АБС
   - Реализовать event-driven уведомления об изменениях
   - Добавить API для получения актуальных ставок

2. **Генератор файлов**
   - Разработать модуль формирования CSV-файлов со ставками
   - Настроить ежедневную выгрузку (00:30)
   - Реализовать внеплановые выгрузки по триггеру

3. **Интеграция с SFTP**
   - Настроить подключение к SFTP-серверу
   - Реализовать автоматическое размещение файлов
   - Добавить логирование операций передачи

## Интеграционный слой (команда интеграций)
1. **Rates API Service**
   - Разработать REST API для получения ставок
   - Реализовать кэширование (Redis, TTL 5 мин)
   - Добавить rate limiting (100 req/s)

2. **Event Subscriber**
   - Подписка на события изменения ставок из АБС
   - Обновление кэша при получении событий
   - Обработка ошибок и ретраи

3. **Мониторинг**
   - Метрики доступности API ставок
   - Отслеживание статуса SFTP-передач
   - Алерты при сбоях интеграции

## Система кол-центра (команда КЦ)
1. **API интеграция**
   - Интеграция с Rates API через REST
   - Реализация локального кэширования (TTL 5 мин)
   - Обработка ошибок подключения к API

2. **UI модификации**
   - Отображение актуальных ставок в интерфейсе
   - Индикация времени последнего обновления
   - Fallback на кэшированные данные при сбоях

## Инфраструктура (команда DevOps)
1. **SFTP-сервер**
   - Развёртывание защищённого SFTP в DMZ
   - Настройка ключевой аутентификации
   - Конфигурация мониторинга доступности

2. **Сетевая безопасность**
   - Настройка firewall правил для API доступа
   - Конфигурация TLS 1.2+ для всех соединений
   - Настройка VPN для партнёрского доступа

3. **Мониторинг и логирование**
   - Централизованное логирование всех операций
   - Настройка алертов по ключевым метрикам
   - Dashboard для отслеживания статуса

## Партнёрский кол-центр (внешняя команда)
1. **Import Service**
   - Разработка сервиса загрузки файлов по SFTP
   - Парсинг CSV и импорт в локальную БД
   - Валидация данных и обработка ошибок

2. **Интеграция с UI**
   - Отображение импортированных ставок
   - Индикация актуальности данных
   - Процедуры перевода клиентов на внутренний КЦ

## Тестирование (QA команда)
1. **Интеграционное тестирование**
   - Тестирование API ставок под нагрузкой
   - Проверка корректности SFTP-передач
   - Валидация форматов файлов

2. **End-to-end тестирование**
   - Сценарии изменения ставок в АБС
   - Проверка обновлений в КЦ (внутренний/партнёрский)
   - Тестирование failover сценариев
